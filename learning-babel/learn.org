#+title: Learning Babel
#+author: me
#+source: http://orgmode.org/worg/org-contrib/babel/intro.html

#+begin_src ruby
  require 'date'
  "this file was evaluated on #{Date.today}"
#+end_src

#+RESULTS:
: this file was evaluated on 2013-04-21

#+begin_src sh
  echo "This file takes up `du -h learn.org |sed 's/\([0-9k]*\)[ ]*org-babel.org/\1/'`"
#+end_src

#+RESULTS:
| This file takes up 4,0K | learn.org |

#+begin_src R :colnames yes
  words <- tolower(scan("learn.org", what="", na.strings=c("|",":")))
  t(sort(table(words[nchar(words) > 3]), decreasing=TRUE)[1:10])
#+end_src

#+RESULTS:
| #+begin_src | #+end_src | file | #+results: | this | 2013-04-21 | 3]), | 4,0k | #+author: | babel |
|-------------+-----------+------+------------+------+------------+------+------+-----------+-------|
|           3 |         3 |    2 |          2 |    2 |          1 |    1 |    1 |         1 |     1 |

#+begin_src ditaa :file blue.png :cmdline -r
+---------+
| cBLU    |
|         |
|    +----+
|    |cPNK|
|    |    |
+----+----+
#+end_src

#+RESULTS:
[[file:blue.png]]

#+begin_src ditaa :file colors.png :cmdline -r
/-------------+-------------\
|cRED RED     |cBLU BLU     |
+-------------+-------------+
|cGRE GRE     |cPNK PNK     |
+-------------+-------------+
|cBLK BLK     |cYEL YEL     |
\-------------+-------------/
#+end_src

#+RESULTS:
[[file:colors.png]]

#+begin_src python :results value
  import time
  print("Hello, today's date is %s" % time.ctime())
  print('Two plus two is')
  return 2 + 2
#+end_src

#+RESULTS:
: 4

#+begin_src python :results output
  import time
  print("Hello, today's date is %s" % time.ctime())
  print('Two plus two is')
#+end_src

#+RESULTS:
: Hello, today's date is Sun Apr 21 22:41:59 2013
: Two plus two is

#+name: square
#+header: :var x=100
#+begin_src python
return x*x
#+end_src

#+RESULTS: square
: 10000

#+call: square(x=6)

#+name: squarehs
#+header: :var x=2
#+begin_src haskell
let y=10 in x*x*y
#+end_src

#+RESULTS: squarehs
: 40

#+call: squarehs(x=10)

#+tblname: fibonacci-inputs
| 1 | 2 | 3 | 4 |  5 |  6 |  7 |  8 |  9 | 10 |
| 2 | 4 | 6 | 8 | 10 | 12 | 14 | 16 | 18 | 20 |

#+name: fibonacci-seq(fib-inputs=fibonacci-inputs)
#+begin_src emacs-lisp
  (defun fibonacci (n)
    (if (or (= n 0) (= n 1))
        n
      (+ (fibonacci (- n 1)) (fibonacci (- n 2)))))

  (mapcar (lambda (row)
            (mapcar #'fibonacci row)) fib-inputs)
#+end_src

#+RESULTS: fibonacci-seq
| 1 | 1 | 2 |  3 |  5 |   8 |  13 |  21 |   34 |   55 |
| 1 | 3 | 8 | 21 | 55 | 144 | 377 | 987 | 2584 | 6765 |

#+tblname: creds
| username | john doe |
| password | abc123   |

#+name: credentials-res(inputs=creds)
#+begin_src emacs-lisp
(defun credentials (data)
  (setq my-special-username (first (first data)))
  (setq my-special-password (first (second data)))
  (username, password))
#+end_src
