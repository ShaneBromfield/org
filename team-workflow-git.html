<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
lang="en" xml:lang="en">
<head>
<title>Team workflow git</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2011-08-08 00:03:29 CEST"/>
<meta name="author" content="Antoine Romain Dumont"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">

<h1 class="title">Team workflow git</h1>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 Introduction </a></li>
<li><a href="#sec-2">2 One possible workflow </a>
<ul>
<li><a href="#sec-2.1">2.1 Retrieve the repository needed </a></li>
<li><a href="#sec-2.2">2.2 Clone this repository </a>
<ul>
<li><a href="#sec-2.2.1">2.2.1 Go to the desired folder to receive the clone of the repository </a></li>
<li><a href="#sec-2.2.2">2.2.2 Then clone the repository </a></li>
</ul>
</li>
<li><a href="#sec-2.3">2.3 We create a branch from master to develop our fix or our functionality. </a></li>
<li><a href="#sec-2.4">2.4 You do your dev regularly, add the files and commit. </a></li>
<li><a href="#sec-2.5">2.5 Regularly, return to master to synchronize the source. </a></li>
<li><a href="#sec-2.6">2.6 Why does git refuse to checkout my branch? </a></li>
<li><a href="#sec-2.7">2.7 Now, we're synchronized with master, we return to our branch and merge these changes inside our branch. </a>
<ul>
<li><a href="#sec-2.7.1">2.7.1 Return to our branch </a></li>
<li><a href="#sec-2.7.2">2.7.2 Merge the content of master into our branch </a></li>
</ul>
</li>
<li><a href="#sec-2.8">2.8 There were conflicts, what do i do? </a>
<ul>
<li><a href="#sec-2.8.1">2.8.1 Why must i merge master into my branch ? </a></li>
<li><a href="#sec-2.8.2">2.8.2 What if master is broken ? </a></li>
</ul>
</li>
<li><a href="#sec-2.9">2.9 I've done my dev, what do i do ? </a>
<ul>
<li><a href="#sec-2.9.1">2.9.1 Check these assertions : </a></li>
</ul>
</li>
<li><a href="#sec-2.10">2.10 Ok then, it's time to merge into master. </a>
<ul>
<li><a href="#sec-2.10.1">2.10.1 Return to master </a></li>
<li><a href="#sec-2.10.2">2.10.2 To avoid some later merging, check you're up-to-date with master </a></li>
</ul>
</li>
<li><a href="#sec-2.11">2.11 Merge the content of the "merging branch" into master </a></li>
<li><a href="#sec-2.12">2.12 Send your modifications to master! </a></li>
<li><a href="#sec-2.13">2.13 What if there are problems ? </a></li>
<li><a href="#sec-2.14">2.14 Now, you're done!!! </a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Introduction </h2>
<div class="outline-text-2" id="text-1">

<p>Here is one possible team workflow!
I'm not saying it's the ultimate way and those that do not follow will
burn! Feel free to discuss it and/or patch it!
</p>
<p>
For simplicity's readings, i talk about master as of the final branch
we need to merge into. It's just to simplify and give a name.
You can, of course, translate this by replacing master by a release branch.
</p>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> One possible workflow </h2>
<div class="outline-text-2" id="text-2">


</div>

<div id="outline-container-2.1" class="outline-3">
<h3 id="sec-2.1"><span class="section-number-3">2.1</span> Retrieve the repository needed </h3>
<div class="outline-text-3" id="text-2.1">

</div>

</div>

<div id="outline-container-2.2" class="outline-3">
<h3 id="sec-2.2"><span class="section-number-3">2.2</span> Clone this repository </h3>
<div class="outline-text-3" id="text-2.2">


</div>

<div id="outline-container-2.2.1" class="outline-4">
<h4 id="sec-2.2.1"><span class="section-number-4">2.2.1</span> Go to the desired folder to receive the clone of the repository </h4>
<div class="outline-text-4" id="text-2.2.1">

<p>Exemple : 
</p>


<pre class="src src-sh"><span style="color: #b0c4de;">cd</span> ~/repositories/pro/
</pre>



</div>

</div>

<div id="outline-container-2.2.2" class="outline-4">
<h4 id="sec-2.2.2"><span class="section-number-4">2.2.2</span> Then clone the repository </h4>
<div class="outline-text-4" id="text-2.2.2">




<pre class="src src-sh">git clone adress-of-the-repository
</pre>




<p>
Example:
</p>


<pre class="src src-sh">git clone https://ardumont@github.com/ardumont/my-org-files.git
</pre>



</div>
</div>

</div>

<div id="outline-container-2.3" class="outline-3">
<h3 id="sec-2.3"><span class="section-number-3">2.3</span> We create a branch from master to develop our fix or our functionality. </h3>
<div class="outline-text-3" id="text-2.3">




<pre class="src src-sh">git checkout -b trigram-user/branch-name
</pre>




<p>
Example : 
</p>


<pre class="src src-sh">git checkout -b adu/doSomeStuff
</pre>



</div>

</div>

<div id="outline-container-2.4" class="outline-3">
<h3 id="sec-2.4"><span class="section-number-3">2.4</span> You do your dev regularly, add the files and commit. </h3>
<div class="outline-text-3" id="text-2.4">

<p>The graph will look like something like this:
</p>
<p>
<img src="/home/tony/Documents/presentations/git/00.master-branch-without-pull-on-master.png"  alt="/home/tony/Documents/presentations/git/00.master-branch-without-pull-on-master.png" />
</p></div>

</div>

<div id="outline-container-2.5" class="outline-3">
<h3 id="sec-2.5"><span class="section-number-3">2.5</span> Regularly, return to master to synchronize the source. </h3>
<div class="outline-text-3" id="text-2.5">




<pre class="src src-sh"><span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">Return to master
</span>git checkout master
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">Synchronize your local repository and your workspace
</span><span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">with the content of the distant repository
</span>git pull
</pre>




<p>
If there were some changes inside the remote master (origin/master), the graph will evolve like this:
</p>
<p>
<img src="/home/tony/Documents/presentations/git/0.master-branch-before-merge.png"  alt="/home/tony/Documents/presentations/git/0.master-branch-before-merge.png" />
</p>
</div>

</div>

<div id="outline-container-2.6" class="outline-3">
<h3 id="sec-2.6"><span class="section-number-3">2.6</span> Why does git refuse to checkout my branch? </h3>
<div class="outline-text-3" id="text-2.6">

<p>If it refuses (git explains everything it does and also why it refuses), you may have forgotten one
step. You may, for example, have changes locally that you did not
commit to your index.
</p>
<p>
So, before returning to master, make sure that :
</p><ul>
<li>
you have commited everything in your index for your branch 

</li>
</ul>


<pre class="src src-sh">git add the-thing-you-wanna-commit-but-unstable another-thing-to-commit-but-unstable ...
git commit -m <span style="color: #ffa07a;">"Filthy commit not stable, need to amend it later"</span>
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">later, when everything is ok
</span><span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">git add the-thing-you-wanna-commit-stable \ 
</span><span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">another-thing-to-commit-stable ... 
</span><span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">amend the commit
</span><span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">git commit --amend
</span></pre>



<ul>
<li>
or dropped it if it is useless to you

</li>
</ul>


<pre class="src src-sh">rm the-thing-you-wanna-commit-but-unstable another-thing-to-commit-but-unstable ...
</pre>



<ul>
<li>
or another option, stash it! 

</li>
</ul>


<pre class="src src-sh">git stash
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">and later when everything is ok, just unstash it
</span><span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">git stash pop
</span></pre>




<p>
Remark 2:
These commands are your best friends, ask them to help you out!
</p>



<pre class="src src-sh">git status
</pre>



<p>
and/or 
</p>


<pre class="src src-sh">gitk --all
</pre>



<p>
and/or
</p>


<pre class="src src-sh">git log
</pre>



</div>

</div>

<div id="outline-container-2.7" class="outline-3">
<h3 id="sec-2.7"><span class="section-number-3">2.7</span> Now, we're synchronized with master, we return to our branch and merge these changes inside our branch. </h3>
<div class="outline-text-3" id="text-2.7">


</div>

<div id="outline-container-2.7.1" class="outline-4">
<h4 id="sec-2.7.1"><span class="section-number-4">2.7.1</span> Return to our branch </h4>
<div class="outline-text-4" id="text-2.7.1">




<pre class="src src-sh">git checkout trigram-user/branch-name
</pre>



</div>

</div>

<div id="outline-container-2.7.2" class="outline-4">
<h4 id="sec-2.7.2"><span class="section-number-4">2.7.2</span> Merge the content of master into our branch </h4>
<div class="outline-text-4" id="text-2.7.2">




<pre class="src src-sh">git merge master
</pre>




<p>
Everything ok ?
If everything is merging without problems, the graph will look like this:
</p>
<p>
<img src="/home/tony/Documents/presentations/git/1.merge-master-into-branch.png"  alt="/home/tony/Documents/presentations/git/1.merge-master-into-branch.png" />
</p>
</div>
</div>

</div>

<div id="outline-container-2.8" class="outline-3">
<h3 id="sec-2.8"><span class="section-number-3">2.8</span> There were conflicts, what do i do? </h3>
<div class="outline-text-3" id="text-2.8">

<p>So there were conflits during merge, we must fix these conflicts manually.
</p>
<p>
Either you use the tool git offers you
</p>


<pre class="src src-sh">git mergetool
</pre>



<p>
(I do not detail because i didn't try yet!)
</p>
<p>
Or, you open your favourite editor or ide and choose what you want to keep or not depending on the situation.
When all conflicts are resolved and that all your tests are ok, add
all the files modified to the index, commit and that's all folks!
</p>



<pre class="src src-sh">git status
git add yourFileModified yourFile2Modified
git commit
</pre>




<p>
In either case of conflict or not, the branch will look like
previously.
</p>
</div>

<div id="outline-container-2.8.1" class="outline-4">
<h4 id="sec-2.8.1"><span class="section-number-4">2.8.1</span> Why must i merge master into my branch ? </h4>
<div class="outline-text-4" id="text-2.8.1">

<ul>
<li id="sec-2.8.1.1">To make sure that what you're doing is still compatible with the latest code! <br/>
</li>
<li id="sec-2.8.1.2">If you do not, you may break the code from master when you merge your fix or dev of the branch into master! It's what i think can protect the master! <br/>
</li>
</ul>
</div>

</div>

<div id="outline-container-2.8.2" class="outline-4">
<h4 id="sec-2.8.2"><span class="section-number-4">2.8.2</span> What if master is broken ? </h4>
<div class="outline-text-4" id="text-2.8.2">

<ul>
<li id="sec-2.8.2.1">It depends on the policy of your project. <br/>
</li>
<li id="sec-2.8.2.2">If your policy is "Every commit is stable (all tests ok)" then it's not possible&hellip; or not! <br/>
<ul>
<li id="sec-2.8.2.2.1">Very strong assertion : Master must be stable! (It is mine!) <br/>
<ul>
<li id="sec-2.8.2.2.1.1">How can we be sure of such assertion ? <br/>
<ul>
<li id="sec-2.8.2.2.1.1.1">Continous integration ! <br/>
</li>
<li id="sec-2.8.2.2.1.1.2">Code review tool such as Gerrit! <br/>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

</div>

<div id="outline-container-2.9" class="outline-3">
<h3 id="sec-2.9"><span class="section-number-3">2.9</span> I've done my dev, what do i do ? </h3>
<div class="outline-text-3" id="text-2.9">


</div>

<div id="outline-container-2.9.1" class="outline-4">
<h4 id="sec-2.9.1"><span class="section-number-4">2.9.1</span> Check these assertions : </h4>
<div class="outline-text-4" id="text-2.9.1">

<ul>
<li id="sec-2.9.1.1">Is all your code commited to your branch? <br/>
</li>
<li id="sec-2.9.1.2">Is your dev done? <br/>
</li>
<li id="sec-2.9.1.3">Are all your unit-tests ok? <br/>
</li>
<li id="sec-2.9.1.4">Are all your functional-tests or integration-tests ok? <br/>
</li>
<li id="sec-2.9.1.5">Does your app deploy and work as expected? <br/>
</li>
</ul>
</div>
</div>

</div>

<div id="outline-container-2.10" class="outline-3">
<h3 id="sec-2.10"><span class="section-number-3">2.10</span> Ok then, it's time to merge into master. </h3>
<div class="outline-text-3" id="text-2.10">


</div>

<div id="outline-container-2.10.1" class="outline-4">
<h4 id="sec-2.10.1"><span class="section-number-4">2.10.1</span> Return to master </h4>
<div class="outline-text-4" id="text-2.10.1">




<pre class="src src-sh">git checkout master
</pre>



</div>

</div>

<div id="outline-container-2.10.2" class="outline-4">
<h4 id="sec-2.10.2"><span class="section-number-4">2.10.2</span> To avoid some later merging, check you're up-to-date with master </h4>
<div class="outline-text-4" id="text-2.10.2">




<pre class="src src-sh">git pull
</pre>



<p>
If everything is already up-to-date, then pass to the next step.
Else, return to the previous step of merging master into your branch.
</p></div>
</div>

</div>

<div id="outline-container-2.11" class="outline-3">
<h3 id="sec-2.11"><span class="section-number-3">2.11</span> Merge the content of the "merging branch" into master </h3>
<div class="outline-text-3" id="text-2.11">




<pre class="src src-sh">git merge trigram-user/branch-name
</pre>



<p>
At this point, it will only do a fast forward, that's just a moving
forward the master pointer to the last commit of your branch (because
your master branch did not advance between your checkout and the merge
command).
</p>
<p>
So the graph will look like this:
</p>
<p>
<img src="/home/tony/Documents/presentations/git/2.master-branch-after-second-merge-branchA-into-master.png"  alt="/home/tony/Documents/presentations/git/2.master-branch-after-second-merge-branchA-into-master.png" />
</p></div>

</div>

<div id="outline-container-2.12" class="outline-3">
<h3 id="sec-2.12"><span class="section-number-3">2.12</span> Send your modifications to master! </h3>
<div class="outline-text-3" id="text-2.12">




<pre class="src src-sh">git push
</pre>



</div>

</div>

<div id="outline-container-2.13" class="outline-3">
<h3 id="sec-2.13"><span class="section-number-3">2.13</span> What if there are problems ? </h3>
<div class="outline-text-3" id="text-2.13">

<p>It's not a real problem, it just means "somebody, somebody put something in your drink"!
It means really that someone pushed something before you did finish
your merge.
</p>
<p>
You must once again merge. But this time, it will be fast.
As your branch and the master are already merged, when you will pull
some code, git will automagically merge what it can from master and
leave you eventuals conflicts to resolve.
</p>



<pre class="src src-sh"><span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">synchronize with everybody... (needs somebody to love!)
</span>git pull
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">fix eventual merge conflicts and check your tests 
</span><span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">add the merged files to the index (git add) 
</span><span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">and commit (git commit)
</span>git push
</pre>



</div>

</div>

<div id="outline-container-2.14" class="outline-3">
<h3 id="sec-2.14"><span class="section-number-3">2.14</span> Now, you're done!!! </h3>
<div class="outline-text-3" id="text-2.14">

</div>
</div>
</div>
<div id="postamble">
<p class="author"> Author: Antoine Romain Dumont
<a href="mailto:tony@linux-mi178">&lt;tony@linux-mi178&gt;</a>
</p>
<p class="date"> Date: 2011-08-08 00:03:29 CEST</p>
<p class="creator">HTML generated by org-mode 6.33x in emacs 23</p>
</div>
</div>
</body>
</html>
